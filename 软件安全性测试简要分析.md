# 软件安全性测试简要分析

## 摘要：

由于软件安全作为信息安全体系的一个重要组成部分，近年来软件开发人员以及测试人员也逐渐认识到软件安全性测试的重要作用。
本文首先从软件安全性的发展背景与现状入手，分析我国目前在该领域工程应用中所遇到的问题，再阐述了当前主要的一些软件安全性测试流程和方法，将现有的测试方法进行初步的阐述，最后进行总结，并展望一下软件安全性测试研究的未来发展方向。

## Abstract：

As software security is an important part of information security system, software developers and testers have gradually realized the important role of software security testing in recent years.
This article first from the development background and present situation of software security, analysis in this field in our country at present problems encountered in engineering application, this paper expounds the current main some software security testing processes and methods, the existing test methods for preliminary elaboration, finally summarized, and prospect the future development direction of the software security testing research.

## 关键词

软件测试、软件安全、软件安全性测试方法、软件安全性测试

## Keywords

Software testing, software security, software security testing methods, software security testing

## 一、引言

* 近年来，随着科技的进步，软件作为一个当下不容忽视的应用领域，逐渐向各种高机密、高科技领域发展，如航空航天、医疗、核工业、军工等对安全性要求极高的领域。因此，软件的安全性，在软件运行的过程中就显得尤为重要了。
* 软件安全主要包括这几个方面：源代码安全、数据库安全、应用安全。其中，源代码安全是软件产品的重要组成部分，也是基础部分；而随着数据库在系统软件开发中所占的比重越来越高，数据库安全也成为了软件系统安全中的一个重要分支；软件安全在软件产品应用范围越来越广的大背景下，也是不容忽视地重要了起来。
* 在传统意义上，国内学者比较多地关注软件的失效安全性，就是指在软件运行的过程中不能引起系统事故的能力。它强调的是当一类安全软件的安全性失效后，不会造成重大人员伤亡、财产损失、环境污染等危险事故的能力。而另一类安全性--保密安全性，则是更多地强调软件在受到恶意攻击时仍能提供所需功能的能力。
* 软件安全性是衡量软件整体性能与质量的一个重要指标，而软件安全性测试是保证软件安全性的一个重要手段。对于前者失效安全性测试，目前常用的测试方法有：基于故障树的测试和基于最小割集的测试。而对于后者保密安全性测试，目前常用的测试方法有：静态分析、形式化方法、故障注入、基于模型的测试、基于属性的测试、语法测试、模糊测试等等。
* 本文首先从软件安全性的发展背景与现状入手，分析我国目前在该领域工程应用中所遇到的问题，再阐述了当前主要的一些软件安全性测试流程和方法，将现有的测试方法进行初步的阐述，最后进行总结，并展望一下软件安全性测试研究的未来发展方向。

## 二、软件安全性测试的特点和分类
* 软件安全性测试是通过测试的手段，来进一步确定软件的安全性是不是与预期所设计的目标一致的过程。软件安全性测试具有特殊性、安全性、相关漏洞与其他一般的软件漏洞相区别的特点，与其他软件测试类型不同。一个普通的软件缺陷可能导致很少一部分用户的使用受到影响，但是一个很难发现的软件安全漏洞却很有可能导致大量用户的使用受到影响，甚至威胁到财产、个人隐私等的安全。
* 软件安全性测试主要包括以下三部分：安全功能测试、渗透测试与验证过程。其中安全功能测试是指在IT软件产品的生命周期中，特别强调的是从产品开发基本完成到发布阶段这一过程中，对产品进行检验以确保产品符合安全需求定义和产品质量标准的过程。而渗透测试则是为了证明网络预防按照预期计划正常运行的一种机制，它是通过模拟恶意黑客的攻击方法，使用两套扫描器进行安全评估的一个渐进的并且逐步深入的过程，来确保网络防御按照预期计划正常运行。验证过程则是通过检验得到证实的过程。
* 与其他传统的测试软件相对比，软件安全性测试的最大差别之处是：软件安全性测试更强调软件“不应该做什么”，而不是传统意义上的“应该做什么”。很多情况下，一个软件缺陷所产生的影响特别小，但是正是这小小的缺陷，所带来的软件安全性漏洞却可能是致命的漏洞，会使得用户遭受巨大的灾难，付出难以想象的代价。非安全性缺陷一般情况下是软件的违反规约操作，比如软件应当做A这件事，它却做了B这件事。而安全性缺陷往往都是由软件的副作用引起的，比如软件应当做A这件事，但它同时也做了B这件事，这时就很容易出现安全性缺陷。传统的软件测试类型强调软件的肯定需求，例如说一个用户，三次登录密码都输入错误系统就锁定他的账号等等。而软件的安全性测试则更强调软件的否定需求，例如说，从源头上规定未授权的用户不能访问该系统的数据等等。
* 软件的安全性测试可大致分为两类：软件安全功能测试与软件安全漏洞测试。所谓的软件安全功能需求包括数据的几大信息安全特性：机密性、完整性、可用性、不可否认性，同时还包括身份认证、授权、访问控制、审计跟踪、委托、安全管理与隐私保护等等。而软件的安全功能测试则是基于软件的这些安全功能需求进一步进行说明，接着测试软件的安全功能的实现是否与预期的安全需求一致，而这些需求的实现是否正确完备。而所谓的软件安全漏洞则是指软件在设计、实现、操作、管理等种种方面，存在的可被利用的缺陷或弱点。当不法分子发现并且利用这些软件缺陷或弱点时，该软件就进入了一种不安全的状态。软件的安全漏洞测试就是从攻击者的角度，从各个不同的方面入手，识别软件的安全漏洞，并及时加以修补。

## 三、软件安全性测试的国内外发展现状
* 软件安全性测试一般情况下是伴随着软件的诞生而诞生的。而在最初的软件开发过程中，由于软件规模比较小而且比较简单，开发过程就显得很随意。而在这个时候的软件测试含义也比较狭隘，几乎就等同于调试了，一般情况下甚至都由开发人员兼职测试工作完成软件安全性测试的工作，而这时的目的就仅仅是纠正软件中存在的已知问题。对测试的投入不仅少，而且测试出现在软件生命周期的时间也晚，往往都是等到代码基本成形，产品已经完成之后测试过程才介入软件的生命周期。但是随着时间的推移，软件本身所能承载的功能也不断丰富，软件测试的内容也在不断丰富，对于软件测试的理解与认识也在不断地深入中。
* 国际上，软件测试被认为是一个非常重要的工程工作，测试也是一个比较独立的职业。国外对于软件安全性的研究是基于实际项目中的成功经验与失败教训。到目前为止，多个国际组织和国际大国都在技术研究与应用、标准制订与推广等各个方面取得了重要成果。例如，IBM、Microsoft等国际大型软件公司，很多重要项目的开发测试人员的占比能达到1:2甚至可以达到1:4。而从另一个角度来看，自动化测试的系统生长环境也是欣欣向荣的，它大跨步地朝着通用化、标准化、网络化和智能化的方向迈进。
* 而回到国内，我国相关领域的研究还是大多参考国外的经验，仍滞留在理论阶段，不能满足应用的基本需求。这主要是由于软件安全性测试的地位还不够高，在很多公司看来，软件测试还是一种可有可无的东西，大多数还只是停留在软件单元测试、集成测试与功能测试上。同时软件安全性测试的标准化与规范化还不够明显，软件安全性测试的相关从业人员还与实际需求有很大的差距，国内软件公司中的开发人员与测试人员的数量一般为5：1，这与国外一般4：1和2：1还是差了很多。更值得注意的是，我国缺乏完全商业化的软件测试操作机构，一般只是政府部门的一些下属机构在做一些产品的验收测试工作，对软件的实际意义还不太大。结合上述观点来看，我国的软件测试产业还有待开发和深度挖掘。

## 四、软件安全性测试的基本流程
* 软件安全性测试具体包含一下几个内容：确认软件安全性测试规程、执行和监督软件安全性测试、整理测试数据、分析测试数据、重新测试失败的系统需求、编写软件安全性测试报告。
* 首先确认软件安全性测试规程。这时要求软件安全性工程师检查根据具体软件所建立的规程，并且需要验证这些规程是否可以完整地测试出软件的安全性需求。
* 接着执行和监督软件安全性测试。软件系统安全团队必须监督软件安全性测试的全过程，这一是为了确认软件安全性测试的规程，二是为了判断这个规程对软件安全性是否会产生异常的影响，导致测试出现偏差等情况。
* 然后需要整理测试数据。在实际情况中，直到测试组将测试数据整理为有用的形式，大多数的异常数据都是很难被发现的。测试数据整理的具体过程是通过抽取测试期间所记录的数据来推导软件的性能和其他相关参数，并把它们表示为易被理解的显示信息。
* 下一步是重新测试失败的系统需求。在一般的情况下，通过一次的测试并不意味着测试可以确认全部的软件安全性需求，也并不意味着测试通过。而同样的，测试中的仿真器、激励器或实验室环境等局限会导致某些软件的某些测试不能通过。从这个角度来看，一次的通过或是不通过是不能代表测试的通过与不通过的。所以，需要通过回归测试来对该软件的该功能的安全性进行充分的测试。
* 最后是编写软件安全性测试报告。软件安全性测试报告要求很高，应当包含所进行的测试标识，以及对测试结果所进行的分析。

## 五、软件安全性测试方法
### 1.基于形式化模型的软件安全性测试方法
* 基于形式化模型软件安全测试方法的基本思想是建立起一个软件的数学模型，然后在形式规格说明语言的支持下提供软件的形式规格说明。其中，常用的形式规格说明语言有基于模型的语言：Z、VDM和B等；和有限状态的语言：有限自动机、SDL和状态图等；还有基于行为的语言：CSP、CCS、Petri网等。
目前来看，基于形式化模型软件安全测试方法主要分为两种：基于模型检验的软件安全性测试方法和基于定理证明的软件安全性测试方法。
#### ①基于模型检验的软件安全性测试方法
* 基于模型检验的软件安全性测试方法是用状态迁移系统S去描述软件的行为，然后用逻辑公式F来表示软件执行的必须满足的性质，通过自动搜索筛选出S中不满足公式F的状态，这时就可以发现软件中的漏洞。
* 基于模型检测的软件安全性测试方法的基本思想是要将系统表示称为自动机模型，然后再将系统要验证的属性用某种逻辑公式来表示，最后采用枚举法穷举出状态空间的方式去证明系统的模型是不是满足要验证的属性。这个方法利用内置结构形式分析，然后驱动测试过程，为测试工程师提供了生成和评估安全性测试集的方法。
* 一般情况下，基于模型检测的软件安全性测试方法流程是这样的：由有限系统规格和覆盖率标准可以共同驱动测试需求，然后这个测试需求通过检验模型再次评估系统需求，每一个模型检验出来的反例都对应一个满足所给定测试需求的测试用例。最后经过收集和剪裁，消除了各种冗余，生成了测试集。这样生成的测试集不仅可以满足所有可行测试需求的测试集，而且它的测试需求还符合与有限系统规格相关的覆盖率标准。
#### ②基于定理证明的软件安全性测试方法
* 基于定理证明的软件安全性测试方法是将程序转换为对应的逻辑公式，然后使用相关的公理和规则去证明这是一个合法的定理。但是，到目前为止，由于定理证明过程特别的耗时费力，所以一般情况下，基于定理证明的软件安全性测试方法只用于验证设计阶段的程序规范而非实际代码。
### 2.基于可靠性分析法的软件安全性测试方法
* 可靠性是指软件在一定时间、在一定条件下可以无故障地执行指定功能的能力和可能性。可以通过可靠度、失效度、平均无故障间隔等等一系列的属性来评价软件的可靠性。基于可靠性分析法的软件安全性测试方法可以分为两类：基于FTA的软件安全测试方法和基于Petri网的软件安全性测试方法。
#### ①基于FTA的软件安全测试方法
* 基于FTA的软件安全测试方法的基本思想是利用故障树的最小割集来生成软件安全性测试用例。该方法是以系统中最不希望发生的故障状态作为故障分析的起始事件，也称为顶事件。然后寻找出一切可能导致这一故障发生的因素，接着进一步绘制出相应的故障树，最后搜索出最小割集，并把这个最小割集作为依据，生成软件安全性测试用例。
* 基于FTA的软件安全测试方法在计算机联锁软件自动测试系统中得到了实现，而实际结果表示：这个方法不仅可以有效地提高测试的自动化程度，还能提高软件安全性测试的充分性。同时，由于应用的领域的差异性，故障树的结束事件，也即底事件，它的语义解释可能不唯一。
#### ②基于Petri网的软件安全性测试方法
* 基于Petri网的软件安全性测试方法则是利用了Petri网的简洁性、直观性和潜在模拟能力强等特点。在因果关系作用下进行推演，可以体现系统的动态行为特征，就目前的实际情况来说，基于Petri网的软件安全性测试方法有两种：正向分析法和逆向分析法。
* 其中正向分析法首先建立了一个完整的可达图和状态标识表，得到了Petri网的可达集，然后建立相应的Petri网的模型，最后在可达集中搜索所有包含任意一个状态的状态标识，并将它标记为危险标识。每一个从初始状态到该危险标识的变迁序列都可以被设计成一个测试用例。在生成用例的时候，每个被标记的危险标识都会至少生成一个用例，而这些用例则构成了针对这个Petri网模型的软件安全性测试用例集合。
* 相对应的，基于Petri网的软件安全性测试方法也在联锁软件自动测试系统中得到了实现。实际结果表示，基于Petri网的软件安全性测试方法可以很快速地求出测试用例集，因此可以有效地提高测试自动化程度。
* 逆向分析法诞生的原因是正向分析法存在一定的缺陷。它的缺陷是因为它需要生成完整的可达图和状态标识集，而这对于逻辑和结构相对比较复杂的系统是很麻烦的，甚至容易出现组合爆炸的问题，也即指数增长问题。逆向分析方法可以规避这个问题，因为它是先构造出所有可能导致危险的软件危险状态，然后再去分析求出由初始状态到这个危险状态的可能路径，再通过构造测试用例去验证该路径是否为可性的。从这个角度可以得出这个结论：正向分析法是通过枚举找到每一个可能的危险状态，而逆向分析法则是要针对具体的问题进行具体的分析。
### 3.基于接口语法的软件安全性测试方法
* 基于接口语法的软件安全性测试方法的基本流程是根据被测软件的功能接口的语法生成测试输入，进一步检测被测软件对各类输入的响应。其中，软件的结构可以包含多种类型：命令行、文件、数据总线、环境变量、套接字等等，软件可以接受的输入明确或隐含地规定了输入的语法。基于这样的一种思想，接口语法的测试定义了软件所能接受的全部的输入数据类型和格式，然后根据语法生成测试用例并执行测试。
* 基于接口语法的软件安全性测试方法是这样进行的：首先识别出被测软件的接口语言，定义语言所需要的语法。接着根据语法生成测试用例，这使需确保所生成的测试输入应当包含全部的各类语法错误、符合语法的正确输入与不符合语法的错误输入等等。最后，通过执行测试来检验被测软件对各种输入的处理情况，进一步确定被测软件是不是存在安全缺陷。
* 基于接口语法的软件安全性测试方法更适用于被测软件有很明确的接口语法，易于表达语法而且易于生成测试输入的情况。这种方法可以结合故障注入技术，这样会得到更好的测试效果。
### 4.基于故障注入的安全性测试
* 基于故障注入的安全性测试是将故障注入技术用在软件安全性测试中，通过这个方法建立起软件与环境交互的故障模型。故障注入主要针对应用与环境的交互点，其中包括有：用户输入、文件系统、网络接口、环境变量等引起的故障。关于故障注入的安全性测试的相关项目有一个叫做OUSPG（university of Oulu，secure programming group）的，它的目标是测试协议实现的安全性，主要思路是通过构造各种协议数据包来测试目标软件能否正确处理。它的实质就是在各类协议数据包中植入各种内嵌故障，比如修改某些协议字段的值等等，以期望发现被测软件是否存在相关的安全漏洞。它支持的协议有：HTTP、SIP、WAP、SNMP等等。
* 故障注入可以有效地模拟现实中能遇到的各种各样的异常程序行为，通过故障注入函数可以强制性地使程序进入到某些特定的状态，而这些特定的状态一般是在进行常规标准测试技术的情形下，无法到达的状态。
### 5.模糊测试
* 模糊测试是一种通过向目标系统提供一些非预期的输入然后监视异常结构去发现软件漏洞的方法。在模糊测试的过程中，用随机生成的坏数据，也即fuzz，去攻击一个程序，然后进行观察，看看哪里遭到了破坏。模糊测试的技巧在于它其实不是符合逻辑的，自动模糊测试并不去猜测那个数据可能会导致破坏，而是尽可能多的将杂乱数据投入到程序中。
* 模糊测试的具体实现其实是一个非常简单的过程：第一步准备一份插入程序中的正确文件，然后用随机数据替换该文件的某些部分，接着用程序打开文件，观察被破坏的部分。
* 模糊测试是一种发现安全漏洞的很有效的测试方法，它在安全性测试中的地位越来越高。采用模糊测试来攻击应用程序可以发现其他采用逻辑思维都难以发现的安全缺陷。
### 6.基于属性的测试
* 基于属性的测试采用TASPEC语言对软件的安全属性进行了描述生成安全属性的规格说明，充分利用了程序的切片技术抽取与这个安全属性相关的代码，用来测试这部分的代码有没有违反安全属性规格说明。基于属性的测试有针对性的测试目标软件的一些特定的安全属性，这样就可以满足安全属性的分类和优先级排序的要求，同时部分与具体软件无关的属性规格也是可以重用的。
### 7.基于白盒的安全性测试
* 基于白盒的安全性测试常见的方法有静态分析。它是用来考察常见的安全缺陷代码模式，例如数据竞争、缓冲区溢出等问题，根据既定的外生变量值求得内生变量的分析方法。程序的静态分析是指在不运行代码的情况下，通过词法分析、语法分析、控制流、数据流分析等技术对程序代码进行一系列的扫描，以验证代码是否满足规范性、安全性、可靠性、可维护性等指标的一种代码分析技术。
* 而静态分析的主要技术有类型推断、数据流分析和约束分析。其中，类型推断也称类型推论和隐含类型，是指编程语言中能够自动推导出生成值的类型的能力，它是一些强静态类型语言中出现的特性。数据流分析是一项编译过程中要使用到的技术，它能从程序代码中收集到程序的语义信息，并通过代数的方法在编译过程中确定变量的定义和使用。
* 程序静态分析与程序动态分析是相对应的代码分析技术，主要特点有：不实际执行程序、执行速度快、效率高，但是误报率较高。
### 8.基于风险的安全性测试
* 基于风险的安全性测试由Brad Arkin、Gary McGraw等人研究。他们将风险分析、安全测试与软件开发过程相结合，以期望尽可能的早发现高风险的安全漏洞。这种方法更多的强调安全开发过程SDL（security development lifecycle），也即在软件开发的种种阶段，进行误用模式、异常场景、风险分析以及渗透测试等等。这里的测试已经不再是软件发布后的穿透与打补丁，更实质地是将安全测试相关的过程集成到软件安全开发生命周期当中。

## 六、总结与未来展望
* 软件安全作为信息安全体系的一个重要组成部分，近年来软件开发人员以及测试人员也逐渐认识到软件安全性测试的重要作用。虽然到目前为止我国国内对软件安全性测试的研究还不够成熟，也尚未在真正的工程中得到专业地推广应用，但是只要我国坚持发展学习借鉴，总有一天我们会走在世界的前列。
* 目前来看，国内的软件安全性测试流程的研究还处于理论阶段，主要参考和借鉴的还是来自外国的标准和规范。虽然现在已有的软件安全性测试方法各具特点各有千秋，但是仍均存在些许不足，在具体情况中的实际使用都存在困难。
* 未来，软件安全性测试研究也许会主要地朝着以下几个方向发展：
#### ①测试流程的规范化与通用化。
* 我国目前现有的软件安全性测试流程主要参考了国外的标准，但由于国外的标准也大有不同，导致我国的流程也大致不同。国外的标准在描述上有的突出表现它的独立性，也有的更加注重它与传统软件测试的融合性。这就需要在实际的研究中具体地对测试流程进行充分的分析，尽早地提出规范化和通用化的测试流程，尽可能地满足我国软件安全性测试的具体要求与需要。
#### ②测试方法的实用化与多样化。
* 虽然现有的常用软件安全性测试方法十分多样，涵盖了种种方面：可靠性方法、形式化方法、软件测试方法，甚至可能还包括借鉴软件可靠性测试方法的基于风险剖面的软件安全性测试方法，但是我们的测试方法还不够实用化与多样化。未来，由于安全性本身就是一个实用性很强的软件质量属性，所以在继续发展扩大软件测试方法的多样化的同时，也要逐步地发展软件测试方法的实用化。
#### ③测试策略的合理化与综合化。
* 目前来看，现有的软件安全性测试往往不太重视策略的综合使用，进而造成测试策略不合理的现象经常发生。同时，测试方法的越来越明显的多样性也使得测试策略制定的难度和工作量大幅度增加。由于这个原因，在研究和使用测试策略的方面，应该更加综合地考虑各种测试方法的优点，争取吸取各个方法的优点，规避各个方法的缺点，提出更加合理的测试策略。既可以提高测试用例的生成和执行速度，又能保证测试的全面性，同时兼顾全面与效率两大要素。
#### ④测试理论的模型化与工程化。
* 正如分析的一样，测试流程将变得越来越规范化、通用化；测试方法将变得越来越实用化、多样化；测试策略变得越来越合理化、综合化。进而使得当前软件开发的过程也将变得越来越形式化、模型化。因此软件安全性测试理论也需要进一步发展，顺应各种性能的发展需求，像着更加模型化、工程化发展。在这同时，也需要注重测试的自动化程度与执行效率高低。更加值得注意的是，由于软件安全性测试的工作量也是很大的，几乎相当于整个软件安全性工程的二分之一，同时，软件安全性工程与各个过程都有着相应的接口，导致软件安全性测试的理论知识必定会向着工程化方向迈进脚步，逐渐实现与软件安全性工程的融合，进而满足软件各种相应的工程需求。
* 综上所述，我国软件安全性测试的发展，应当结合自身的特点，在学习和借鉴国外优秀经验的基础上，形成规范化、通用化的测试流程，实用化、多样化的测试方法，合理化、综合化的测试策略与模型化、工程化的测试理论。

#### 七、参考资料

1.[软件安全性测试技术探析](https://wenku.baidu.com/view/f27989924128915f804d2b160b4e767f5acf80c2.html)

2.[软件测试国内外发展现状及趋势研究](http://www.doc88.com/p-6901867548670.html)

3.何鑫、郑军、刘畅 软件安全性测试研究综述 计算机测量与控制 2011.19(3) 493-496

4.刘仁千、张玉中、李林林、陈玉涛 软件安全性测试技术研究 国家电网许继集团软件测试室

5.施寅生、邓世伟、谷天阳 软件安全性测试方法研究 微计算机信息（管控一体化） 2018.24(1-3) 56-58
